# SIST UI
## コンセプト

- **見た目**  
    ブルーアーカイブやメメントモリのようなソシャゲUI＋Appleの洗練UIの融合。いままでのDEを覆す。

- **役割**  
    パソコンの操作を誰でも楽しく簡単にする “ソシャゲ感覚デスクトップ”  
    LLMと連携し、**「チャット/話すだけでPCを使いこなせる」**環境を実現  
    子ども～大人まで使える社会的・教育的価値を内包

- **搭載AI**  
    gemma-3-12b-it-GGUF(Q5_K_M)/gemma-3-4b-it-GGUF(Q5_K_M)/Qwen3-14B-GGUF(Q4_k_m)＋ RAG ＋ agent機能

## 対象

- Linuxに移行したいけどターミナルに抵抗があるユーザー
- GIGAスクール端末用（教育機関）
- 全く新しい体験をしたいユーザー
- パソコン操作が苦手なユーザー

---

## ホーム画面

- ゲームみたいに、わかりやすいソフト起動など
- ショートカットカード（アプリ・フォルダ・Web・マクロ登録可）
- デスクトップフォルダ分け：スマホ感覚でドラッグしてグループ化

### 上部バー

- システム情報（CPU温度・メモリ・ネットワーク）
- 日付・時刻
- 通知センター

### 下部バー

- アプリランチャー（タグ別・検索機能）
- 「コントロールセンター」（音量・輝度・ネット・Bluetooth・電源・再生中の音楽）
- LLMチャット用入力バー(フォーカスするとにゅっと出てきて外すと帰ってく)


---

## 特徴機能（新要素入り）

### 1. AIアシスト操作

- LLMが自然言語でPC操作  
    例：「USBの中身をコピーして圧縮して送って」→コマンドを生成して実行
- RAGでmanやコマンド一覧を参照し、安全な実行のみ許可
- 「声だけでPC操作」モード（マイク常時ON／ショートカット呼び出し）
- GGUFなので、GPUモードやCPUモードなど切り替えれる。
- もし、実行に失敗したらそのログを見てもう一度書き直してくれる
- 軽量モード(4B)と性能モード(12B)と思考モード(14B)入れ替えれる。

### 2. 学習支援モード（GIGAスクール特化）

- 教科ごとのAIチューター（授業内容を画像・音声・文章でサポート）
- 課題管理（締め切りや提出先を自動整理）
- Google Classroom / Microsoft Teamsと統合
- 「授業中はSNSやゲームを隠す」集中モード/AIが授業に関係ないことをしているか検知
- 授業ノート自動整理（板書写真→OCR→検索可能PDF化）
- 「教師モード」と「生徒モード」の設定が可能。教師ユーザーは、デバイスのすべての操作が可能。(すべてのアプリやすべての機能の制限等。ただしチャット履歴などのプライバシーなものは覗けない。)

### 3. 大人向け・社会貢献機能

- リモートワーク特化
    - 複数画面の一括管理（会議＋資料＋チャット）レイアウト保存
    - AIで議事録作成＋ToDo自動生成

### 4. 高度なマルチデバイス連携

- スマホ通知ミラーリング
- スマホカメラをPCのWebカメラとして利用
- タブレットやスマホを追加ディスプレイとして使う
- Google hoem連携でIoT機器（ライト・エアコン）もコントロール
- androidアプリと連携。通知や写真、クリップボードを共有。

### 5. 見た目と操作性の革命

- スキンシステム：UIテーマをソシャゲ風・シンプル・和風などに切替
- アニメーション演出：ボタン押下や画面遷移をソシャゲ的に
- フルオーバーレイUI：GNOME上にRaylib描画で完全カスタム見た目

### 6. その他便利機能
- 長時間使っている場合は、「休憩しよう！」って通知を送る
- １時間毎に写真を取り、姿勢が悪くなってないかを確認する（補助的なものなので、よく認識できなかったら無視可能）
- 夜間は自動で読書灯になる
- ダウンロード元のリンクと、ファイルをちょっと確認して、AIが簡易的な気休めのウイルスチェック
- 災害時の警告通知。通知バーに通知が行く。（誤報だった場合きまづいので通常の通知として行う。）
- superボタン(windwosボタン)が押されると、カーソルの近くに円が表示されて、そこで音量や最近開いたアプリ、お気に入りのアプリ、音楽の管理、マイク機能のon・off等ができる。(Hello UHD)

---
## システム的な
 - これらの機能のON/OFFを簡単に。LLMの変更/LLMサーバー(外部で起動しているLMstudioやOllamaなど)の設定も。センシティブなもの（ウイルスチェックや姿勢チェック）はデフォルトでOFF。
 - ここに書いてある独自の機能については、詳しく説明が見れるようにする。
 - 特に、管理モード(GIGAスクールの生徒モードなど)などの設定は慎重に。起動時に「この端末は～よって管理されています」などと表示。
 - ユーザー共有機能。LAN内で、フレンド登録したらフィアル共有やチャット等ができる。
 - AIチャットチェック機能。チャット内容が過激な場合(死ねやバカ等)は、AIが警告してくる

---

## 技術構成

- **ウィンドウ管理：Xfwm4 + Picom**：ウィンドウ管理
- **Raylib + Raygui**：フルスクリーンUI描画（常時オーバーレイ）
- **Tauri**：設定・Web統合アプリ
- **LLM**：gemma-3-12b-it-GGUF(Q5_K_M)/gemma-3-4b-it-GGUF(Q5_K_M)/Qwen3-14B-GGUF(Q4_k_m)＋ RAG ＋ agent機能
- **SQLite**：UI設定・履歴保存
- 災害情報取得の方法はsaigai.py参照
- 安定性のため、Xfceをベースに開発。

---

## 操作方法（新体験）

- Alt+Space: 円形ランチャーを開閉
- Ctrl+K: Halo HUD をトグル（カーソル位置に円形ヘルプ）
- Ctrl+P: コマンドパレットを開く（アクション・アプリ検索）
- 下部バー: 入力欄に質問/指示をそのまま入力、🎤は長押しでプッシュトゥトーク（UIのみ）

## Raylibオーバーレイ（任意・実験的）

TauriバックエンドにRaylibベースの軽量オーバーレイを追加しました（featureフラグ）。

### 有効化のビルド

1. Raylib開発環境を用意（Linux推奨）
2. 以下でビルド（featureを有効化）

```bash
cargo tauri build --features overlay_raylib
```

アプリ起動後は Ctrl+K →「Raylibオーバーレイ 切替」で起動/停止できます。

注意: Windowsではビルド要件が増えます。未有効時はAPIは安全に失敗します。

---

## シンプルDEとして動かす（Xfce連携 + .deb パッケージ）

前提: Ubuntu 22.04+ または互換環境（Xorg/Xfwm4 推奨）

1) 依存関係のインストール（自動化）

sudo権限で以下を実行:

```
./package_install.sh
```

2) ビルドと .deb 生成（動作確認用: try-deploy）

```
cd sis-ui
npm ci
npm run build
cd ..
./try-deploy.sh
```

完了後、build/ 以下に sis-ui_0.1.0_amd64.deb ができます。

3) 最小DE連携まで含めたセットアップ（DE-deploy）

以下で xfwm4 + picom など最小構成を導入し、パッケージのビルド/インストール、自動起動設定まで実施します。

```
sudo ./DE-deploy.sh
```

4) インストールと自動起動設定（個別）

```
sudo apt install ./build/sis-ui_0.1.0_amd64.deb
```

postinst で /etc/xdg/autostart/sis-ui.desktop を配置します。Xfce セッションでログインすると自動起動します。手動起動は「SIS UI」アプリから可能です。

4) 便利なバックエンドAPI（簡易）

- 音量: pactl backend（set_volume）
- 輝度: brightnessctl/xbacklight fallback（set_brightness）
- アプリ起動: .desktop 由来の Exec を実行（launch_app）
- スクショ: gnome-screenshot（take_screenshot）
- 音楽: playerctl（play_pause/next/prev）

これらは Command Palette からも呼び出せます。
